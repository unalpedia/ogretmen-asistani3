<div id="gelisim-karnesi-v12-fixed" style="background:#fff; border-radius:15px; overflow:hidden; border:1px solid #e0e6ed; box-shadow:0 10px 25px rgba(0,0,0,0.05);">
    
    <div style="display: flex; background: #2c3e50; color: white; padding: 25px; align-items: center; justify-content: space-between;">
        <div style="flex: 1;">
            <span style="font-size: 11px; font-weight: 700; opacity: 0.7; letter-spacing: 1px;">GÃœNCEL SKOR</span>
            <div style="display: flex; align-items: baseline; gap: 8px; margin-top: 5px;">
                <span id="v12-puan-ana" style="font-size: 32px; font-weight: 900;">--</span>
                <span id="v12-delta-kutusu" style="font-size: 12px; font-weight: 700; padding: 3px 8px; border-radius: 5px; background: rgba(255,255,255,0.1);">--</span>
            </div>
        </div>

        <div style="flex: 1.2; text-align: center; border-left: 1px solid rgba(255,255,255,0.1); border-right: 1px solid rgba(255,255,255,0.1);">
            <span style="font-size: 11px; font-weight: 700; opacity: 0.7; letter-spacing: 1px;">SON 5 TREND</span>
            <div id="v12-badges-ana" style="font-size: 22px; margin-top: 8px; letter-spacing: 4px;">--</div>
        </div>

        <div style="flex: 1; text-align: right;">
            <span style="font-size: 11px; font-weight: 700; opacity: 0.7; letter-spacing: 1px;">5'LÄ° ORTALAMA</span>
            <div id="v12-ort-ana" style="font-size: 32px; font-weight: 900; color: #1dd1a1;">--</div>
        </div>
    </div>

    <div style="padding: 20px;">
        <table style="width: 100%; border-collapse: collapse; font-size: 14px;">
            <thead>
                <tr style="border-bottom: 2px solid #f1f5f9;">
                    <th style="padding: 12px; text-align: left; color: #94a3b8; font-size: 12px; text-transform: uppercase;">Deneme AdÄ±</th>
                    <th style="padding: 12px; text-align: center; color: #94a3b8; font-size: 12px; text-transform: uppercase;">Puan</th>
                    <th style="padding: 12px; text-align: center; color: #94a3b8; font-size: 12px; text-transform: uppercase;">Net</th>
                    <th style="padding: 12px; text-align: center; color: #94a3b8; font-size: 12px; text-transform: uppercase;">Trend (Â±%5)</th>
                </tr>
            </thead>
            <tbody id="v12-table-govdesi">
                </tbody>
        </table>
    </div>
</div>

<script>
/**
 * Ã–ÄžRETMEN ASÄ°STAN PRO v12.4 - GeliÅŸim Karnesi Entegrasyonu
 * @param {Array} ogrenciSinavlari - Ã–ÄŸrencinin sÄ±nav listesi
 */
function renderV12Makyaj(ogrenciSinavlari) {
    const tableBody = document.getElementById('v12-table-govdesi');
    let toplamBes = 0;
    let badgeMetni = "";
    
    tableBody.innerHTML = ""; // Mevcut tabloyu temizle

    ogrenciSinavlari.forEach((sinav, i) => {
        let ikon = "âšª"; // BaÅŸlangÄ±Ã§/Veri yok
        
        // %5 Trend Hesaplama MantÄ±ÄŸÄ±
        if (ogrenciSinavlari[i+1]) {
            const oran = ((sinav.puan - ogrenciSinavlari[i+1].puan) / ogrenciSinavlari[i+1].puan) * 100;
            if (oran > 5) ikon = "ðŸŸ¢";
            else if (oran < -5) ikon = "ðŸ”´";
            else ikon = "ðŸŸ¡";
        }

        // Tabloyu sevdiÄŸin "AyrÄ± SÃ¼tun" formatÄ±nda doldur
        tableBody.innerHTML += `
            <tr style="border-bottom: 1px solid #f8fafc;">
                <td style="padding: 15px 12px; font-weight: 600; color: #2d3436;">${sinav.ad}</td>
                <td style="padding: 15px 12px; text-align: center; font-weight: 800; color: #2ecc71;">${sinav.puan}</td>
                <td style="padding: 15px 12px; text-align: center; color: #636e72;">${sinav.net}</td>
                <td style="padding: 15px 12px; text-align: center; font-size: 18px;">${ikon}</td>
            </tr>
        `;

        if (i < 5) {
            toplamBes += sinav.puan;
            badgeMetni += ikon;
        }
    });

    // Ãœst Panel DetaylarÄ±
    const sonSinav = ogrenciSinavlari[0];
    const oncekiSinav = ogrenciSinavlari[1] || sonSinav;
    const yuzdeDegisim = (((sonSinav.puan - oncekiSinav.puan) / oncekiSinav.puan) * 100).toFixed(1);

    document.getElementById('v12-puan-ana').innerText = sonSinav.puan;
    document.getElementById('v12-ort-ana').innerText = (toplamBes / Math.min(ogrenciSinavlari.length, 5)).toFixed(1);
    document.getElementById('v12-badges-ana').innerText = badgeMetni;

    // Delta Renk AyarÄ± (%5 kuralÄ±)
    const deltaKutu = document.getElementById('v12-delta-kutusu');
    deltaKutu.innerText = (yuzdeDegisim > 0 ? "+" : "") + yuzdeDegisim + "%";
    
    if (Math.abs(yuzdeDegisim) <= 5) {
        deltaKutu.style.background = "#f39c12"; // SarÄ±mtÄ±rak (Stabil)
    } else if (yuzdeDegisim > 5) {
        deltaKutu.style.background = "#27ae60"; // YeÅŸil (YÃ¼kseliÅŸ)
    } else {
        deltaKutu.style.background = "#e74c3c"; // KÄ±rmÄ±zÄ± (DÃ¼ÅŸÃ¼ÅŸ)
    }
}

// TEST: Asistan Pro'dan veri geldiÄŸini varsayÄ±yoruz
const v12TestVerisi = [
    { ad: "TÃ¼rkiye Geneli - 5", puan: 92, net: 76 },
    { ad: "BranÅŸ Denemesi - 4", puan: 85, net: 69 },
    { ad: "Okul SÄ±navÄ± - 3", puan: 86, net: 70 },
    { ad: "Tarama SÄ±navÄ± - 2", puan: 80, net: 62 },
    { ad: "Seviye Tespit - 1", puan: 74, net: 58 }
];

renderV12Makyaj(v12TestVerisi);
</script>
