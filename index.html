<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <style>
        /* v12.4 ANA TASARIM DÄ°SÄ°PLÄ°NÄ° */
        body { font-family: 'Inter', sans-serif; background-color: #f0f2f5; padding: 20px; }
        .rapor-sayfasi { max-width: 950px; margin: auto; background: white; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); overflow: hidden; }
        
        /* YENÄ° PERFORMANS SKALASI (ÃœST PANEL) */
        .performans-skalasi { 
            display: flex; 
            background: #1a2a3a; 
            color: white; 
            padding: 30px; 
            justify-content: space-between; 
            align-items: center;
        }
        .skala-item { text-align: center; flex: 1; }
        .skala-baslik { font-size: 11px; font-weight: 700; opacity: 0.6; text-transform: uppercase; letter-spacing: 1px; }
        .skala-deger { font-size: 32px; font-weight: 900; margin-top: 5px; }
        .delta-kutusu { font-size: 12px; font-weight: 700; padding: 4px 10px; border-radius: 6px; margin-left: 8px; vertical-align: middle; }

        /* AYRI SÃœTUNLU GELÄ°ÅžÄ°M TABLOSU */
        .tablo-alani { padding: 25px; }
        .v12-tablo { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .v12-tablo th { 
            text-align: left; 
            padding: 15px; 
            background: #f8fafc; 
            color: #64748b; 
            font-size: 12px; 
            text-transform: uppercase; 
            border-bottom: 2px solid #edf2f7;
        }
        .v12-tablo td { padding: 18px 15px; border-bottom: 1px solid #f1f5f9; font-size: 14px; color: #334155; }
        .puan-sutun { font-weight: 800; color: #2563eb; text-align: center; }
        .net-sutun { color: #64748b; text-align: center; }
        .trend-sutun { text-align: center; font-size: 20px; }
        
        /* TREND RENKLERÄ° */
        .bg-yukselis { background: #10b981; color: white; }
        .bg-dusus { background: #ef4444; color: white; }
        .bg-stabil { background: #f59e0b; color: white; }
    </style>
</head>
<body>

<div class="rapor-sayfasi">
    <div class="performans-skalasi">
        <div class="skala-item" style="text-align: left;">
            <div class="skala-baslik">GÃœNCEL SONUÃ‡</div>
            <div class="skala-deger">
                <span id="ana-puan">--</span>
                <span id="ana-delta" class="delta-kutusu">--</span>
            </div>
        </div>
        
        <div class="skala-item" style="border-left: 1px solid rgba(255,255,255,0.1); border-right: 1px solid rgba(255,255,255,0.1);">
            <div class="skala-baslik">SON 5 TREND (FORM)</div>
            <div id="ana-badges" style="margin-top:10px; letter-spacing: 5px;">--</div>
        </div>

        <div class="skala-item" style="text-align: right;">
            <div class="skala-baslik">HAREKETLÄ° ORTALAMA</div>
            <div id="ana-ortalama" class="skala-deger" style="color: #10b981;">--</div>
        </div>
    </div>

    <div class="tablo-alani">
        <h3 style="margin: 0 0 20px 0; color: #1e293b; font-size: 18px;">GeliÅŸim Karnesi DetaylarÄ±</h3>
        <table class="v12-tablo">
            <thead>
                <tr>
                    <th>Deneme TanÄ±mÄ±</th>
                    <th style="text-align: center;">Puan</th>
                    <th style="text-align: center;">Net</th>
                    <th style="text-align: center;">Trend (Â±%5)</th>
                </tr>
            </thead>
            <tbody id="v12-liste">
                </tbody>
        </table>
    </div>
</div>

<script>
    // Ã–ÄžRETMEN ASÄ°STAN PRO v12.4 VERÄ° ENTEGRASYONU
    function raporuOlustur(veriler) {
        const liste = document.getElementById('v12-liste');
        let toplamPuan = 0;
        let formIkonlari = "";
        
        liste.innerHTML = ""; 

        veriler.forEach((sinav, i) => {
            let trend = "ðŸŸ¡";
            // %5 KURALI HESAPLAMA
            if (veriler[i+1]) {
                const degisim = ((sinav.puan - veriler[i+1].puan) / veriler[i+1].puan) * 100;
                if (degisim > 5) trend = "ðŸŸ¢";
                else if (degisim < -5) trend = "ðŸ”´";
            }

            // AYRI SÃœTUNLU TABLO SATIRI
            liste.innerHTML += `
                <tr>
                    <td style="font-weight: 600;">${sinav.ad}</td>
                    <td class="puan-sutun">${sinav.puan}</td>
                    <td class="net-sutun">${sinav.net} Net</td>
                    <td class="trend-sutun">${trend}</td>
                </tr>
            `;

            // ÃœST PANEL Ä°Ã‡Ä°N SON 5 VERÄ°SÄ°
            if (i < 5) {
                toplamPuan += sinav.puan;
                formIkonlari += trend;
            }
        });

        // ÃœST PANEL GÃœNCELLEME
        const son = veriler[0];
        const onceki = veriler[1] || son;
        const farkYuzde = (((son.puan - onceki.puan) / onceki.puan) * 100).toFixed(1);

        document.getElementById('ana-puan').innerText = son.puan;
        document.getElementById('ana-ortalama').innerText = (toplamPuan / Math.min(veriler.length, 5)).toFixed(1);
        document.getElementById('ana-badges').innerText = formIkonlari;

        const deltaKutu = document.getElementById('ana-delta');
        deltaKutu.innerText = (farkYuzde > 0 ? "+" : "") + farkYuzde + "%";
        
        // RENK MANTIÄžI
        if (Math.abs(farkYuzde) <= 5) deltaKutu.className = "delta-kutusu bg-stabil";
        else if (farkYuzde > 5) deltaKutu.className = "delta-kutusu bg-yukselis";
        else deltaKutu.className = "delta-kutusu bg-dusus";
    }

    // TEST VERÄ°SÄ°
    const ornekVeri = [
        { ad: "Final Denemesi A", puan: 94, net: 78 },
        { ad: "Tarama SÄ±navÄ± 4", puan: 85, net: 69 },
        { ad: "TÃ¼rkiye Geneli 2", puan: 86, net: 70 },
        { ad: "Kurum Denemesi 1", puan: 80, net: 62 },
        { ad: "HazÄ±rlÄ±k SÄ±navÄ±", puan: 72, net: 55 }
    ];
    raporuOlustur(ornekVeri);
</script>

</body>
</html>
