<div id="student-detail-v12-4" style="background:#fcfcfc; border-radius:12px; padding:20px; font-family:'Inter', system-ui, sans-serif;">
    
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-bottom: 25px;">
        
        <div style="background: white; padding: 15px; border-radius: 10px; border: 1px solid #eaeaea; box-shadow: 0 2px 4px rgba(0,0,0,0.02);">
            <div style="font-size: 11px; color: #888; font-weight: 700; text-transform: uppercase;">GÃ¼ncel Skor</div>
            <div style="display: flex; align-items: baseline; gap: 10px; margin-top: 5px;">
                <span id="v12-last-puan" style="font-size: 28px; font-weight: 800; color: #2d3436;">--</span>
                <span id="v12-delta" style="font-size: 12px; font-weight: 700; padding: 3px 8px; border-radius: 6px;">--</span>
            </div>
        </div>

        <div style="background: white; padding: 15px; border-radius: 10px; border: 1px solid #eaeaea; box-shadow: 0 2px 4px rgba(0,0,0,0.02); text-align: center;">
            <div style="font-size: 11px; color: #888; font-weight: 700; text-transform: uppercase;">Son 5 Deneme Trendi</div>
            <div id="v12-badges" style="font-size: 22px; margin-top: 8px; letter-spacing: 3px;">--</div>
        </div>

        <div style="background: white; padding: 15px; border-radius: 10px; border: 1px solid #eaeaea; box-shadow: 0 2px 4px rgba(0,0,0,0.02); text-align: right;">
            <div style="font-size: 11px; color: #888; font-weight: 700; text-transform: uppercase;">Son 5 Ortalama</div>
            <div id="v12-average" style="font-size: 28px; font-weight: 800; color: #2d3436; margin-top: 5px;">--</div>
        </div>
    </div>

    <div style="background: white; border-radius: 10px; border: 1px solid #eaeaea; overflow: hidden;">
        <table style="width: 100%; border-collapse: collapse; text-align: left; font-size: 14px;">
            <thead>
                <tr style="background: #f8f9fa; border-bottom: 2px solid #eee;">
                    <th style="padding: 15px; color: #636e72; font-weight: 600;">Deneme AdÄ±</th>
                    <th style="padding: 15px; color: #636e72; font-weight: 600;">Puan</th>
                    <th style="padding: 15px; color: #636e72; font-weight: 600;">Net</th>
                    <th style="padding: 15px; color: #636e72; font-weight: 600; text-align: center;">Trend (Â±%5)</th>
                </tr>
            </thead>
            <tbody id="v12-table-rows">
                </tbody>
        </table>
    </div>
</div>

<script>
/**
 * Ã–ÄŸretmen Asistan Pro v12.4 Entegrasyon Fonksiyonu
 * @param {Array} exams - Ã–ÄŸrenci deneme verileri dizisi
 */
function updateStudentView(exams) {
    const tableBody = document.getElementById('v12-table-rows');
    const badgeContainer = document.getElementById('v12-badges');
    let totalScore = 0;
    let badgeHTML = "";
    
    // Tabloyu temizle
    tableBody.innerHTML = "";

    exams.forEach((exam, i) => {
        let trendIcon = "âšª"; 
        
        // Bir Ã¶nceki deneme ile kÄ±yaslama (%5 kuralÄ±)
        if (exams[i + 1]) {
            const current = exam.puan;
            const previous = exams[i + 1].puan;
            const diffPercent = ((current - previous) / previous) * 100;

            if (diffPercent > 5) trendIcon = "ðŸŸ¢";
            else if (diffPercent < -5) trendIcon = "ðŸ”´";
            else trendIcon = "ðŸŸ¡";
        }

        // Tablo SatÄ±rÄ± OluÅŸtur (AyrÄ± SÃ¼tun FormatÄ±)
        tableBody.innerHTML += `
            <tr style="border-bottom: 1px solid #f9f9f9;">
                <td style="padding: 15px; font-weight: 600; color: #2d3436;">${exam.ad}</td>
                <td style="padding: 15px; color: #0984e3; font-weight: 700;">${exam.puan}</td>
                <td style="padding: 15px; color: #636e72;">${exam.net} Net</td>
                <td style="padding: 15px; text-align: center; font-size: 18px;">${trendIcon}</td>
            </tr>
        `;

        // Son 5 veri iÃ§in Ã¶zet hesaplamalarÄ±
        if (i < 5) {
            totalScore += exam.puan;
            badgeHTML += trendIcon;
        }
    });

    // Ãœst Panel Verileri
    const latest = exams[0];
    const second = exams[1] || latest;
    const delta = (((latest.puan - second.puan) / second.puan) * 100).toFixed(1);
    
    document.getElementById('v12-last-puan').innerText = latest.puan;
    document.getElementById('v12-average').innerText = (totalScore / Math.min(exams.length, 5)).toFixed(1);
    document.getElementById('v12-badges').innerHTML = badgeHTML;

    // Delta Renklendirme
    const deltaEl = document.getElementById('v12-delta');
    deltaEl.innerText = (delta > 0 ? "+" : "") + delta + "%";
    
    if (Math.abs(delta) <= 5) {
        deltaEl.style.background = "#fff3e0"; deltaEl.style.color = "#e67e22"; // Sabit
    } else if (delta > 5) {
        deltaEl.style.background = "#e8f5e9"; deltaEl.style.color = "#2e7d32"; // ArtÄ±ÅŸ
    } else {
        deltaEl.style.background = "#ffebee"; deltaEl.style.color = "#c62828"; // DÃ¼ÅŸÃ¼ÅŸ
    }
}

// TEST VERÄ°SÄ° (Projeden gelen veriyi buraya baÄŸlayÄ±n)
const sampleExams = [
    { ad: "Final Denemesi - 05", puan: 95, net: 78.5 },
    { ad: "Genel Deneme - 04", puan: 82, net: 65.0 },
    { ad: "Tarama SÄ±navÄ± - 03", puan: 84, net: 67.5 },
    { ad: "BaÅŸarÄ± Ä°zleme - 02", puan: 80, net: 64.0 },
    { ad: "Seviye Tespit - 01", puan: 72, net: 55.5 }
];

updateStudentView(sampleExams);
</script>
