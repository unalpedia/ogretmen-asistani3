<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performans Raporu V12.4 - MakyajlÄ± SÃ¼rÃ¼m</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f7f6; color: #333; padding: 20px; }
        .container { max-width: 900px; margin: auto; background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        
        /* Yeni Performans Paneli */
        .dashboard-header { display: flex; justify-content: space-between; align-items: center; background: #2c3e50; color: white; padding: 20px; border-radius: 10px; margin-bottom: 30px; }
        .stat-box { text-align: center; flex: 1; }
        .stat-label { font-size: 0.8rem; text-transform: uppercase; opacity: 0.8; display: block; margin-bottom: 5px; }
        .stat-value { font-size: 1.8rem; font-weight: bold; }
        .delta-badge { font-size: 0.9rem; padding: 3px 8px; border-radius: 5px; margin-left: 5px; }
        
        /* Tablo YapÄ±sÄ± (12.4 StandartlarÄ±) */
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        th { background-color: #ecf0f1; color: #7f8c8d; text-align: left; padding: 12px; font-weight: 600; border-bottom: 2px solid #ddd; }
        td { padding: 15px 12px; border-bottom: 1px solid #eee; }
        tr:hover { background-color: #f9f9f9; }

        /* Trend Renkleri */
        .up { color: #27ae60; font-weight: bold; }
        .down { color: #e74c3c; font-weight: bold; }
        .stable { color: #f39c12; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h2 style="margin-top: 0; color: #2c3e50;">Deneme Analiz Sistemi <small style="font-size: 0.5em; vertical-align: middle;">V12.4</small></h2>

    <div class="dashboard-header">
        <div class="stat-box">
            <span class="stat-label">Son Skor</span>
            <div id="last-score" class="stat-value">--</div>
            <span id="delta-val" class="delta-badge"></span>
        </div>
        <div class="stat-box" style="border-left: 1px solid #555; border-right: 1px solid #555;">
            <span class="stat-label">Son 5 Form</span>
            <div id="form-badges" style="font-size: 1.4rem; letter-spacing: 4px; margin-top:5px;">--</div>
        </div>
        <div class="stat-box">
            <span class="stat-label">Son 5 Ortalama</span>
            <div id="avg-score" class="stat-value">--</div>
        </div>
    </div>

    <table>
        <thead>
            <tr>
                <th>Deneme AdÄ±</th>
                <th>Puan</th>
                <th>Net</th>
                <th>Tarih</th>
                <th>Trend</th>
            </tr>
        </thead>
        <tbody id="exam-table-body">
            </tbody>
    </table>
</div>

<script>
    // Test Verisi (En yeni sÄ±nav en Ã¼stte)
    const examData = [
        { name: "TÃ¼rkiye Geneli - 5", score: 88, net: 72.5, date: "15.01.2026" },
        { name: "BranÅŸ Denemesi - 12", score: 84, net: 68.0, date: "12.01.2026" },
        { name: "Kurum SÄ±navÄ± - 8", score: 82, net: 65.5, date: "08.01.2026" },
        { name: "Ã–zdebir - 3", score: 83, net: 66.0, date: "05.01.2026" },
        { name: "Limit - 2", score: 78, net: 61.5, date: "01.01.2026" }
    ];

    function calculateReport() {
        const tbody = document.getElementById('exam-table-body');
        let totalForAvg = 0;
        let badgesHTML = '';

        examData.forEach((exam, index) => {
            const prevExam = examData[index + 1];
            let trendEmoji = 'âšª';
            let trendClass = '';

            if (prevExam) {
                const change = ((exam.score - prevExam.score) / prevExam.score) * 100;
                
                if (change > 5) {
                    trendEmoji = 'ðŸŸ¢';
                    trendClass = 'up';
                } else if (change < -5) {
                    trendEmoji = 'ðŸ”´';
                    trendClass = 'down';
                } else {
                    trendEmoji = 'ðŸŸ¡';
                    trendClass = 'stable';
                }
            }

            // Tabloyu OluÅŸtur (12.4 AyrÄ± SÃ¼tun YapÄ±sÄ±)
            const row = `<tr>
                <td><strong>${exam.name}</strong></td>
                <td>${exam.score}</td>
                <td>${exam.net}</td>
                <td style="color: #999; font-size: 0.85rem;">${exam.date}</td>
                <td>${trendEmoji}</td>
            </tr>`;
            tbody.innerHTML += row;

            // Ä°lk 5 sÄ±nav iÃ§in form ve ortalama hesabÄ±
            if (index < 5) {
                totalForAvg += exam.score;
                badgesHTML += trendEmoji;
            }
        });

        // Ãœst Paneli GÃ¼ncelle
        const lastExam = examData[0];
        const secondLast = examData[1];
        const deltaPercent = (((lastExam.score - secondLast.score) / secondLast.score) * 100).toFixed(1);
        
        document.getElementById('last-score').innerText = lastExam.score;
        document.getElementById('avg-score').innerText = (totalForAvg / Math.min(examData.length, 5)).toFixed(1);
        document.getElementById('form-badges').innerHTML = badgesHTML;
        
        const deltaEl = document.getElementById('delta-val');
        deltaEl.innerText = (deltaPercent > 0 ? '+' : '') + deltaPercent + '%';
        deltaEl.style.background = deltaPercent > 5 ? '#27ae60' : (deltaPercent < -5 ? '#e74c3c' : '#f39c12');
    }

    calculateReport();
</script>

</body>
</html>
